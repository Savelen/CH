<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>canvas</title>
	<link rel="stylesheet" href="style/style.css">

</head>

<body>
	<div class="pos">
		<div class="x">X : <span></span></div>
		<div class="y">Y : <span></span></div>
		<div class="FPS">FPS : <span></span></div>
		<div class="act">Act : <span></span></div>
	</div>
	<!-- <header>
		<h1>Canvas</h1>
	</header> -->
	<section class="canvas">
		<canvas id="c1"> Error </canvas>
		<canvas id="c2"> Error </canvas>
	</section>
	<script src="js/canvas.js"></script>
	<script>

		//создание canvas и определение его размера
		let canvas = document.querySelector('#c1');
		let canvas2 = document.querySelector('#c2');

		// canvas.width = window.innerWidth - 46;
		// canvas.height = window.innerHeight / 100 * 80 - 32;

		canvas.style.border = "2px solid blue";
		canvas.width = window.innerWidth - 25;
		canvas.height = window.innerHeight;

		canvas2.style.border = "2px solid red";
		canvas2.width = window.innerWidth - 25;
		canvas2.height = window.innerHeight;
		let can = new CH(canvas);
		let can2 = new CH(canvas2);

		can2.roundDash('time');
		can2.lock = 60;

		// создание линий (тип "l")
		// ------------------------------------------------------------------------------------------------------
		// can.drawLine(false, 270, 240, 5, 50, null, false);
		can.drawLine(false, 20, 300, 30, 10, "blue");
		can.drawLine({ name: "элемент" }, 20, 250, 30, 10, "blue", false);
		// can.drawLine({ x: 140, y: 300, w: 200, h: 40, color: "red", name: "Square", fill: true });

		can2.drawLine(false, 270, 240, 5, 50, null, false);
		can2.drawLine(false, 20, 300, 30, 10, "blue", false);
		can2.drawLine({ x: 140, y: 300, w: 200, h: 40, color: "red", name: "Square", fill: true });

		can.drawLine({ name: "окно фон 1" }, 310, 250, 60, 70, "orange", true);
		can.drawLine({ name: "окно фон 2" }, 130, 250, 60, 70, "orange", true);

		// создание обЪектов (тип "o")
		// ------------------------------------------------------------------------------------------------------
		can.drawObj([[100, 200], [400, 200], [400, 400], [100, 400]], { fill: true, widht: 1, name: "Стена", color: "#663" });
		can.drawObj([[310, 250], [340, 250], [340, 285], [340, 250], [370, 250], [370, 285], [340, 285], [370, 285], [370, 320], [340, 320], [340, 285], [340, 320], [310, 320], [310, 285], [340, 285], [310, 285]], { color: "blue", name: 'Рама 1' });
		can.drawObj([[130, 250], [160, 250], [160, 285], [160, 250], [190, 250], [190, 285], [160, 285], [190, 285], [190, 320], [160, 320], [160, 285], [160, 320], [130, 320], [130, 285], [160, 285], [130, 285]], { color: "blue", name: 'Рама 2' });
		can.drawObj([[100, 200], [400, 200], [250, 50]], { name: "Крыша", color: 'gray', fill: true });
		can.drawObj([[220, 250], [280, 250], [280, 400], [220, 400]], { name: "Дверь", color: '#531', fill: true });
		can.drawObj([[232, 327], [232, 320], [225, 320], [225, 327]], { name: "Дверная ручка", color: 'gold' });

		can.drawObj([[1300, 300], [1000, 300], [1000, 500]], { name: 'прямоугольник' });
		can.drawObj([[600, 100], [800, 100], [700, 200], [600, 300], [800, 300]], { name: "time", color: "aqua" });

		can2.drawObj([[600, 100], [800, 100], [700, 200], [600, 300], [800, 300]], { name: "time", color: "green" });


		// обьединяем элементы (тип "c")
		// ------------------------------------------------------------------------------------------------------
		can.combEl(["окно фон 1", "Рама 1"], ["окно фон 1"], "Окно 1");
		can.combEl(["окно фон 2", "Рама 2"], ["окно фон 2"], "Окно 2");
		can.combEl(["Стена", "Крыша", "Окно 1", "Окно 2", "Дверь", "Дверная ручка"], ["Стена", "Крыша"], "Дом");

		// начало отслеживания
		// ------------------------------------------------------------------------------------------------------
		can.objectDetect();
		can2.objectDetect();
		// делаем элементы интерактивными
		// ------------------------------------------------------------------------------------------------------
		can.addActiveEl("Дом");
		can.addActiveEl('time');
		can.addActiveEl('элемент');
		// can.addActiveEl('прямоугольник');

		can2.addActiveEl('time');
		can2.addActiveEl('Square');


		// анимация
		// ------------------------------------------------------------------------------------------------------
		can.roundDash("прямоугольник", 100, 60, [10, 15, 5]);
		// can.roundDash("time", 1, 60, [10, 5]);
		can.roundDash("time", 10, 60, [40, 20],2);

		// ----------------------
		let dash = 100;
		can.addEvent('time', "click", () => {
			console.log("this is works!");
			can.roundDash("time", dash, 999, [(10 + 0.5 * dash), (15 + 0.5 * dash), (5 + 0.5 * dash)],5);
			dash -= 10 * ((dash > 0) ? 1 : -10);
			console.log(dash);
		});
		can.activeEventListener('click');

		// let qqq = 1;
		// let i = 1;
		// setInterval(() => {
		// 	if (qqq == 1) i = 1;
		// 	else if (qqq == 100) i = -1;
		// 	qqq += i;
		// 	if (i == 1) can.moveObj("time", { right: 5 });
		// 	else can.moveObj("time", { left: 5 });
		// }, 1);

		// делает все элементы активными
		// ------------------------------------------------------------------------------------------------------
		// can.elements.forEach((e) => {
		// 	can.addActiveEl(e.name);
		// });


		// какой-то узор (5000 элементов. для изменения поменять условие в цикдле для i)
		// для проверки производительности (узор + анимация + манипуляция ограничение отрисовки (can.lock))
		// ------------------------------------------------------------------------------------------------------
		// for (let i = 0, j = 0; i < 2500; i++, (j < 600) ? j += 2 : j = 0) {
		// 	setTimeout(() => {
		// 		can.drawObj([[i + 0, i / 2], [i, i / 2 + 100], [i, j + 50]], { color: "red" });
		// 	}, 10);
		// 	setTimeout(() => {
		// 		can.drawObj([[i, i / 2 + 0], [i + 0, i / 2], [i, j + 100]], { color: "green" });
		// 	}, 20);
		// }
	</script>
</body>

</html>